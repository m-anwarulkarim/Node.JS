/*  global-vs-module
==========================================================
ЁЯМН  NODE.JS GLOBAL OBJECT тАФ ржХрж┐ ржХрж┐ ржерж╛ржХрзЗ (import ржЫрж╛рзЬрж╛ржЗ)
==========================================================

ЁЯФ╣ Node.js ржП ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ window ржирзЗржЗ  
ЁЯФ╣ ржПрж░ ржмржжрж▓рзЗ ржЖржЫрзЗ: global ржмрж╛ globalThis  
ЁЯФ╣ ржПржЦрж╛ржирзЗ ржХрж┐ржЫрзБ Built-in functions рж╕ржм ржлрж╛ржЗрж▓рзЗ import ржЫрж╛рзЬрж╛ржЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ
*/

// ---------------- GLOBAL FEATURES -----------------

/*
1) console тЖТ рж▓ржЧ ржжрзЗржЦрж╛рж░ ржЬржирзНржп globally available
--------------------------------------------------*/
console.log("Hello from global!");

/*
2) setTimeout / setInterval / setImmediate
-------------------------------------------*/
setTimeout(() => {}, 1000);
setInterval(() => {}, 1000);
setImmediate(() => {});

/*
3) clearTimeout / clearInterval / clearImmediate
------------------------------------------------*/

/*
4) process тЖТ Node.js environment system
-----------------------------------------
Inside:
  - process.env   тЖТ Environment variables
  - process.argv  тЖТ CLI arguments
  - process.cwd() тЖТ Current directory
  - process.exit() тЖТ App ржмржирзНржз ржХрж░рзЗ
*/

/*
5) Buffer тЖТ Binary data handle ржХрж░рж╛рж░ ржЬржирзНржп
-------------------------------------------*/
const buf = Buffer.from("Hello");

/*
6) queueMicrotask() тЖТ Microtask queue ржП ржХрж╛ржЬ ржкрж╛ржарж╛рзЯ
--------------------------------------------------*/

/*
7) fetch, Request, Response, Headers (Node v18+)
--------------------------------------------------*/

/*
8) atob / btoa тЖТ Base64 encode/decode
----------------------------------------*/

/*
9) TextEncoder / TextDecoder
------------------------------*/

/*
10) AbortController / AbortSignal
-----------------------------------
*/

/*  
==========================================================
тЭМ ржпрж╛ global ржП ржерж╛ржХрзЗ ржирж╛ (import ржХрж░рждрзЗ рж╣рзЯ)
==========================================================
fs, path, http, events, crypto, os  
ржПржЗрж╕ржм Module global ржП ржирзЗржЗ, рждрж╛ржЗ import / require ржХрж░рждрзЗ рж╣рзЯ
*/
import fs from "fs";
import path from "path";

/*  
==========================================================
ЁЯУж  NODE.JS MODULE SYSTEM (CommonJS / ESM) тАФ ржХрж┐ ржжрзЗрзЯ
==========================================================

Node.js ржкрзНрж░рждрж┐ржЯрж╛ ржлрж╛ржЗрж▓ржХрзЗ ржЖрж▓рж╛ржжрж╛ module рж╣рж┐рж╕рзЗржмрзЗ ржЪрж╛рж▓рж╛рзЯред

CommonJS ржлрж╛ржЗрж▓ржХрзЗ Node.js ржЕржнрзНржпржирзНрждрж░рзЗ ржирж┐ржЪрзЗрж░ ржорждрзЛ wrap ржХрж░рзЗ:
(function (exports, require, module, __filename, __dirname) {
     ... рждрзЛржорж╛рж░ ржХрзЛржб ...
})

ржПржЬржирзНржп Module Scope ржПрж░ ржмрж┐рж╢рзЗрж╖ ржХрж┐ржЫрзБ ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓ ржкрж╛ржУржпрж╝рж╛ ржпрж╛рзЯ:
*/

// ---------------- MODULE-SCOPE FEATURES -----------------

/*
1) __dirname тЖТ ржмрж░рзНрждржорж╛ржи ржлрж╛ржЗрж▓ ржпрзЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржЖржЫрзЗ рждрж╛рж░ path
----------------------------------------------------------*/
console.log("__dirname:", __dirname);

/*
2) __filename тЖТ ржмрж░рзНрждржорж╛ржи ржлрж╛ржЗрж▓рзЗрж░ рж╕ржорзНржкрзВрж░рзНржг path
----------------------------------------------------------*/
console.log("__filename:", __filename);

/*
3) module тЖТ Module related info
----------------------------------
  - module.exports
  - module.id
  - module.filename
*/

/*
4) exports тЖТ module.exports ржПрж░ shortcut
-----------------------------------------*/

/*
5) require() тЖТ CommonJS import function
-----------------------------------------*/

/*  
==========================================================
тЭЧ ESM (type: "module") ржП ржХрж┐ ржерж╛ржХрзЗ ржирж╛:
==========================================================
тЭМ __dirname  
тЭМ __filename  
тЭМ require  
тЭМ module  
тЭМ exports

ESM wrapper function ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж╛, рждрж╛ржЗ ржПржЧрзБрж▓рзЛ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ ржирж╛ред
==========================================================
*/

/*
ESM ржП __dirname / __filename ржмрж╛ржирж╛ржирзЛрж░ ржЙржкрж╛рзЯ:
-------------------------------------------
*/

import { fileURLToPath } from "url";
import { dirname } from "path";

const esmFile = fileURLToPath(import.meta.url);
const esmDir = dirname(esmFile);

console.log("ESM __filename:", esmFile);
console.log("ESM __dirname:", esmDir);

/*  
==========================================================
ЁЯФе рж╕ржВржХрзНрж╖рж┐ржкрзНржд рж╕рж╛рж░рж╛ржВрж╢ (рж╕рзБржкрж╛рж░ ржЗржЬрж┐)
==========================================================

GLOBAL тЖТ рж╕ржм ржлрж╛ржЗрж▓рзЗ import ржЫрж╛рзЬрж╛ржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ  
  тЬФ console  
  тЬФ setTimeout  
  тЬФ process  
  тЬФ Buffer  
  тЬФ fetch  
  тЬФ AbortController  

MODULE тЖТ рж╢рзБржзрзБржорж╛рждрзНрж░ module wrapper ржПрж░ ржХрж╛рж░ржгрзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ  
  тЬФ __dirname  
  тЬФ __filename  
  тЬФ module  
  тЬФ exports  
  тЬФ require  

==========================================================
*/
